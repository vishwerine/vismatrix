{% load socialaccount %}
{% load static %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="description" content="VisMatrix.Space — AI-powered personal achievement. Track progress, stay accountable, and achieve goals with agentic AI.">
  <meta name="theme-color" content="#1d4ed8">
  <title>Welcome — VisMatrix.Space</title>

  <!-- App Icons (browser tab / PWA) -->
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'branding/vismatrixicon.png' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'branding/vismatrixicon.png' %}">
  <meta name="application-name" content="VisMatrix">
  <meta name="apple-mobile-web-app-title" content="VisMatrix">

  <!-- Tailwind + DaisyUI + Bootstrap Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Apply theme BEFORE paint (prevents flash + syncs with dashboard) -->
  <script>
    (function () {
      const STORAGE_KEY = 'vm_theme';
      const saved = localStorage.getItem(STORAGE_KEY);
      const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = (saved === 'light' || saved === 'dark') ? saved : (systemPrefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>

  <style>
    :root{
      --border: rgba(226,232,240,.9);
      --shadow: 0 1px 2px rgb(15 23 42 / 0.06), 0 20px 40px rgb(15 23 42 / 0.10);
      --focus: 0 0 0 3px rgb(29 78 216 / 0.25);
    }
    [data-theme="dark"] {
      --border: rgb(148 163 184 / 0.22);
      --shadow: 0 1px 2px rgb(0 0 0 / 0.15), 0 20px 40px rgb(0 0 0 / 0.25);
      --focus: 0 0 0 3px rgb(96 165 250 / 0.3);
    }
    body{
      background:
        radial-gradient(1000px 600px at 20% 12%, rgba(29,78,216,.14) 0%, rgba(29,78,216,0) 60%),
        radial-gradient(800px 500px at 90% 10%, rgba(16,185,129,.12) 0%, rgba(16,185,129,0) 55%),
        radial-gradient(900px 600px at 55% 95%, rgba(99,102,241,.10) 0%, rgba(99,102,241,0) 60%),
        #f8fafc;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-tap-highlight-color: transparent;
      transition: background-color 0.3s ease;
    }
    [data-theme="dark"] body{
      background:
        radial-gradient(900px 520px at 18% 15%, rgb(29 78 216 / 0.10), transparent 55%),
        radial-gradient(900px 520px at 82% 20%, rgb(96 165 250 / 0.08), transparent 52%),
        radial-gradient(900px 520px at 55% 95%, rgb(34 197 94 / 0.07), transparent 55%),
        #0b1220;
    }
    :focus-visible { outline: none; box-shadow: var(--focus); border-radius: 12px; }
    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; animation: none !important; scroll-behavior: auto !important; }
    }

    .glass{
      background: rgba(255,255,255,.92);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    [data-theme="dark"] .glass{
      background: rgba(15,23,42,.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    .solid{
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    [data-theme="dark"] .solid{
      background: rgba(15,23,42,.95);
    }
    [data-theme="dark"] header{
      background: rgba(11,18,32,0.80);
      border-color: rgb(148 163 184 / 0.22);
    }
    [data-theme="dark"] footer{
      background: rgba(11,18,32,0.70);
      border-color: rgb(148 163 184 / 0.22);
    }
    .theme-text-primary { color: #0f172a; }
    [data-theme="dark"] .theme-text-primary { color: #e2e8f0; }
    .theme-text-secondary { color: #475569; }
    [data-theme="dark"] .theme-text-secondary { color: #94a3b8; }
    .theme-text-muted { color: #64748b; }
    [data-theme="dark"] .theme-text-muted { color: #94a3b8; }
    .theme-bg-logo { background: #ffffff; border-color: #e2e8f0; }
    [data-theme="dark"] .theme-bg-logo { background: #1e293b; border-color: #475569; }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      padding:.5rem .75rem;
      border-radius: 9999px;
      font-weight: 800;
      font-size: .82rem;
      border: 1px solid rgba(29,78,216,.18);
      background: rgba(29,78,216,.08);
      color: #0f172a;
      white-space: nowrap;
      transition: all 0.3s ease;
    }
    [data-theme="dark"] .tag{
      border: 1px solid rgba(96,165,250,.25);
      background: rgba(96,165,250,.12);
      color: #e5e7eb;
    }
    .brandmark{
      width: 44px; height: 44px;
      border-radius: 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(29,78,216,.10);
      border: 1px solid rgba(29,78,216,.18);
      flex-shrink: 0;
      transition: all 0.3s ease;
    }
    [data-theme="dark"] .brandmark{
      background: rgba(96,165,250,.12);
      border: 1px solid rgba(96,165,250,.25);
    }
    .feature{
      border: 1px solid rgba(226,232,240,.9);
      border-radius: 16px;
      background: rgba(255,255,255,.86);
      transition: all 0.3s ease;
    }
    [data-theme="dark"] .feature{
      border: 1px solid rgb(148 163 184 / 0.22);
      background: rgba(15,23,42,.80);
    }
    .input:focus { border-color: rgb(29 78 216); box-shadow: var(--focus); }

    /* Subtle section divider */
    .soft-divider{
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(226,232,240,.9), transparent);
    }
  </style>
</head>

<body>
  <a href="#signin" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-50 bg-slate-900 text-white px-3 py-2 rounded-xl">
    Skip to sign in
  </a>

  <!-- Top bar -->
  <header class="sticky top-0 z-40 bg-white/70 backdrop-blur border-b border-slate-200 transition-colors duration-300">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between gap-3">
      <a href="{% url 'landing_page' %}" class="flex items-center gap-3 hover:opacity-90 transition">
        <img
          src="{% static 'branding/vismatrixicon.png' %}"
          alt="VisMatrix icon"
          class="w-9 h-9 rounded-xl ring-1 theme-bg-logo p-1 object-contain transition-colors duration-300"
          loading="eager"
        />
        <div class="leading-tight">
          <div class="text-base sm:text-lg font-black tracking-tight theme-text-primary transition-colors duration-300">
            VisMatrix<span class="text-primary">.space</span>
          </div>
          <div class="text-xs theme-text-muted hidden sm:block transition-colors duration-300">AI-powered personal achievement</div>
        </div>
      </a>

      <div class="flex items-center gap-2">
        <span class="tag hidden sm:inline-flex">
          <i class="bi bi-stars" aria-hidden="true"></i>
          Agentic AI arriving March 2026
        </span>
        <button id="themeToggle" class="btn btn-ghost btn-sm btn-circle" aria-label="Toggle theme">
          <i class="bi bi-moon-stars text-lg" id="themeIcon" aria-hidden="true"></i>
        </button>
        <a href="{% url 'about' %}" class="btn btn-ghost btn-sm">About</a>
        <a href="#signin" class="btn btn-primary btn-sm gap-2">
          <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i>
          Sign in
        </a>
      </div>
    </div>
  </header>

  <!-- HERO + SIGN IN (clean layout, mobile-first) -->
  <main class="max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-10 space-y-6">

    <!-- HERO -->
    <section class="glass p-6 sm:p-10" id="signin">
      <div class="flex flex-col gap-6">

        <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6">
          <div class="min-w-0">



            <h1 class="text-3xl sm:text-5xl font-black tracking-tight leading-tight theme-text-primary transition-colors duration-300">
              VisMatrix<span class="text-primary">.space</span> Your personal growth space — powered by AI agents.
            </h1>

            <p class="mt-4 text-base sm:text-lg theme-text-secondary leading-relaxed max-w-3xl transition-colors duration-300">
              Turn goals into daily actions. Track health, study, and work progress, see trends, and stay accountable with friends.
            </p>

            <div class="mt-5 flex flex-col sm:flex-row gap-3">
              <a href="#signin" class="btn btn-primary gap-2">
                <i class="bi bi-rocket-takeoff" aria-hidden="true"></i>
                Get started
              </a>
              <a href="{% url 'about' %}" class="btn btn-outline gap-2">
                <i class="bi bi-info-circle" aria-hidden="true"></i>
                Learn more
              </a>
              <span class="tag hidden lg:inline-flex">
                <i class="bi bi-stars" aria-hidden="true"></i>
                Agentic AI arriving March 2026
              </span>
            </div>
          </div>

          <!-- A compact “trust / proof” panel -->
          <div class="solid p-5 sm:p-6 w-full lg:max-w-sm">
            <div class="flex items-start gap-3">
              <div class="brandmark">
                <i class="bi bi-shield-check text-primary text-xl" aria-hidden="true"></i>
              </div>
              <div>
                <div class="font-extrabold theme-text-primary transition-colors duration-300">Built for consistency</div>
                <p class="text-sm theme-text-secondary mt-1 transition-colors duration-300">
                  Lightweight tracking, clear analytics, and social accountability to help you finish what you start.
                </p>
              </div>
            </div>

            <div class="mt-4 space-y-2 text-sm theme-text-secondary transition-colors duration-300">
              <div class="flex items-start gap-2">
                <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
                <span>Track tasks + time logs effortlessly</span>
              </div>
              <div class="flex items-start gap-2">
                <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
                <span>Visual analytics to spot trends</span>
              </div>
              <div class="flex items-start gap-2">
                <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
                <span>Friends keep you accountable</span>
              </div>
            </div>
          </div>
        </div>

        <div class="soft-divider"></div>



      </div>

      <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-2xl theme-bg-logo ring-1 shadow-sm flex items-center justify-center transition-colors duration-300">
            <img src="{% static 'branding/vismatrixicon.png' %}" alt="VisMatrix icon" class="w-8 h-8 object-contain">
          </div>
          <div>
            <h2 class="text-2xl sm:text-3xl font-black tracking-tight theme-text-primary transition-colors duration-300">Sign in</h2>
            <p class="text-sm theme-text-muted transition-colors duration-300">Continue to your VisMatrix.Space account.</p>
          </div>
        </div>
        <a href="{% url 'about' %}" class="btn btn-ghost btn-sm hidden sm:inline-flex">Read more</a>
      </div>

      {% get_providers as socialaccount_providers %}
      {% if socialaccount_providers %}
      <div class="mt-6">
        <a href="{% provider_login_url 'google' %}"
           class="btn btn-outline w-full gap-3 normal-case h-12 shadow-sm hover:shadow-md transition-all duration-200 text-base font-semibold"
           role="button" aria-label="Continue with Google account">
          <i class="bi bi-google text-lg" aria-hidden="true"></i>
          <span>Continue with Google</span>
        </a>
        <div class="divider text-sm theme-text-muted mt-5 transition-colors duration-300">
          or sign in with email
        </div>
      </div>
      {% endif %}

      {% if form.non_field_errors %}
      <div class="alert alert-error shadow-sm mt-4">
        <i class="bi bi-exclamation-triangle-fill flex-shrink-0" aria-hidden="true"></i>
        <span>{% for error in form.non_field_errors %}{{ error }}{% endfor %}</span>
      </div>
      {% endif %}

      <form method="post" class="mt-5 space-y-5" novalidate role="form">
        {% csrf_token %}

        <div class="grid lg:grid-cols-2 gap-4">
          <div class="form-control w-full">
            <label for="{{ form.login.id_for_label }}" class="label">
              <span class="label-text font-semibold">Email or Username</span>
            </label>
            {% render_field form.login class="input input-bordered w-full h-12 text-base" placeholder="Enter email or username" autocomplete="username email" %}
            {% if form.login.errors %}
            <label class="label">
              <span class="label-text-alt text-error">{{ form.login.errors|first }}</span>
            </label>
            {% endif %}
          </div>

          <div class="form-control w-full">
            <label for="{{ form.password.id_for_label }}" class="label flex justify-between items-center">
              <span class="label-text font-semibold">Password</span>
              <a href="#" class="text-sm link link-hover theme-text-secondary hover:text-primary font-semibold transition-colors duration-200">Forgot?</a>
            </label>
            {% render_field form.password class="input input-bordered w-full h-12 text-base" placeholder="Enter your password" autocomplete="current-password" %}
            {% if form.password.errors %}
            <label class="label">
              <span class="label-text-alt text-error">{{ form.password.errors|first }}</span>
            </label>
            {% endif %}
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-full h-12 text-base font-extrabold shadow-lg hover:shadow-xl gap-2">
          <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i>
          <span>Sign in</span>
        </button>
      </form>

      <div class="mt-6 pt-6 border-t solid text-center space-y-2 transition-colors duration-300">
        <p class="text-sm theme-text-muted transition-colors duration-300">
          New here?
          <a href="{% url 'account_signup' %}" class="link link-hover font-extrabold text-primary">Create an account</a>
        </p>
        <p class="text-xs theme-text-muted transition-colors duration-300">
          Built for clarity, momentum, and accountability.
        </p>
      </div>
    </section>

    <!-- WHY / PILLARS -->
    <section class="glass p-6 sm:p-8">
      <h2 class="text-2xl sm:text-3xl font-black tracking-tight theme-text-primary transition-colors duration-300">What makes VisMatrix different</h2>
      <p class="mt-2 theme-text-secondary max-w-3xl transition-colors duration-300">
        Not just tracking — guided execution. AI agents help you break down goals into actionable steps and adjust as you progress.
      </p>

      <div class="mt-6 grid lg:grid-cols-2 gap-3">
        <div class="feature p-5">
          <div class="flex items-center gap-2">
            <i class="bi bi-robot text-primary text-lg" aria-hidden="true"></i>
            <div class="font-extrabold theme-text-primary transition-colors duration-300">Agentic AI Technology</div>
          </div>
          <ul class="mt-3 space-y-2 text-sm theme-text-secondary transition-colors duration-300">
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Real-time progress tracking and adjustment</span>
            </li>
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Context-aware feedback and suggestions</span>
            </li>
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Adaptive learning from behavior patterns</span>
            </li>
          </ul>
        </div>

        <div class="feature p-5">
          <div class="flex items-center gap-2">
            <i class="bi bi-graph-up text-primary text-lg" aria-hidden="true"></i>
            <div class="font-extrabold theme-text-primary transition-colors duration-300">Data-Driven Insights</div>
          </div>
          <ul class="mt-3 space-y-2 text-sm theme-text-secondary transition-colors duration-300">
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Visual analytics and trends</span>
            </li>
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Predictive goal completion estimates</span>
            </li>
            <li class="flex items-start gap-2">
              <i class="bi bi-check-circle text-success mt-0.5" aria-hidden="true"></i>
              <span>Social accountability through friend networks</span>
            </li>
          </ul>
        </div>
      </div>

              <!-- Highlights -->
        <div class="grid sm:grid-cols-3 gap-3">
          <div class="feature p-4">
            <div class="flex items-center gap-3">
              <div class="brandmark"><i class="bi bi-heart-pulse text-primary text-xl" aria-hidden="true"></i></div>
              <div>
                <div class="font-extrabold theme-text-primary transition-colors duration-300">Health goals</div>
                <div class="text-sm theme-text-muted transition-colors duration-300">Create habits and track your progress.</div>
              </div>
            </div>
          </div>

          <div class="feature p-4">
            <div class="flex items-center gap-3">
              <div class="brandmark"><i class="bi bi-book text-primary text-xl" aria-hidden="true"></i></div>
              <div>
                <div class="font-extrabold theme-text-primary transition-colors duration-300">Study goals</div>
                <div class="text-sm theme-text-muted transition-colors duration-300">Daily plans and learning consistency.</div>
              </div>
            </div>
          </div>

          <div class="feature p-4">
            <div class="flex items-center gap-3">
              <div class="brandmark"><i class="bi bi-briefcase text-primary text-xl" aria-hidden="true"></i></div>
              <div>
                <div class="font-extrabold theme-text-primary transition-colors duration-300">Work goals</div>
                <div class="text-sm theme-text-muted transition-colors duration-300">Execution focus and measurable wins.</div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="glass p-6 sm:p-8">
      <h2 class="text-xl sm:text-2xl font-black tracking-tight theme-text-primary transition-colors duration-300">How it works</h2>
      <div class="mt-5 grid sm:grid-cols-3 gap-3">
        <div class="feature p-5">
          <div class="text-xs font-black theme-text-muted">STEP 1</div>
          <div class="mt-1 font-extrabold theme-text-primary transition-colors duration-300">Create goals (Tasks)</div>
          <p class="mt-2 text-sm theme-text-muted transition-colors duration-300">Choose health, study, or work objectives and define milestones.</p>
        </div>
        <div class="feature p-5">
          <div class="text-xs font-black theme-text-muted">STEP 2</div>
          <div class="mt-1 font-extrabold theme-text-primary transition-colors duration-300">Track progress</div>
          <p class="mt-2 text-sm theme-text-muted transition-colors duration-300">Log activity daily and view trends and patterns.</p>
        </div>
        <div class="feature p-5">
          <div class="text-xs font-black theme-text-muted">STEP 3</div>
          <div class="mt-1 font-extrabold theme-text-primary transition-colors duration-300">Stay accountable</div>
          <p class="mt-2 text-sm theme-text-muted transition-colors duration-300">Use friends + insights to keep momentum and finish goals.</p>
        </div>
      </div>

      <div class="mt-6 flex justify-center">
        <a href="#signin" class="btn btn-primary gap-2">
          <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i>
          Sign in to get started
        </a>
      </div>
    </section>

  </main>

  <footer class="border-t border-slate-200 bg-white/60 backdrop-blur transition-colors duration-300">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-8 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
      <div class="text-sm theme-text-muted transition-colors duration-300">
        © {% now "Y" %} VisMatrix.Space · AI-powered personal achievement
      </div>
      <div class="flex flex-wrap gap-2">
        <a href="{% url 'about' %}" class="btn btn-ghost btn-sm">About</a>
        <a href="#signin" class="btn btn-ghost btn-sm">Sign in</a>
      </div>
    </div>
  </footer>

  <script>
    // Theme toggle functionality (synced with dashboard)
    (function() {
      const STORAGE_KEY = 'vm_theme';
      const htmlEl = document.documentElement;
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = document.getElementById('themeIcon');

      const updateIcon = (theme) => {
        if (themeIcon) {
          themeIcon.className = theme === 'dark' ? 'bi bi-sun text-lg' : 'bi bi-moon-stars text-lg';
        }
      };

      // Initialize icon based on current theme
      updateIcon(htmlEl.getAttribute('data-theme') || 'light');

      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          const currentTheme = htmlEl.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
          htmlEl.setAttribute('data-theme', newTheme);
          localStorage.setItem(STORAGE_KEY, newTheme);
          updateIcon(newTheme);
        });
      }
    })();

    document.addEventListener('DOMContentLoaded', () => {
      const firstField = document.querySelector('input[type="text"], input[type="email"]');
      if (firstField) firstField.focus();

      setTimeout(() => {
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach(alert => {
          alert.style.transition = 'opacity 0.5s';
          alert.style.opacity = '0';
          setTimeout(() => alert.remove(), 500);
        });
      }, 8000);
    });
  </script>
</body>
</html>

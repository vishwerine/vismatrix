{% extends 'tracker/base.html' %}
{% load widget_tweaks %}

{% block title %}{% if form.instance.pk %}Edit{% else %}New{% endif %} Category{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto">
    <div class="mb-6 text-center md:text-left">
        <h1 class="text-2xl md:text-3xl font-bold">
            {% if form.instance.pk %}Edit Category{% else %}Create Category{% endif %}
        </h1>
    </div>

    <div class="card bg-base-100 shadow-lg border border-base-200">
        <div class="card-body p-4 md:p-6">
            <form method="post" class="flex flex-col gap-5">
                {% csrf_token %}

                <div class="form-control w-full">
                    <label class="label pt-0">
                        <span class="label-text font-semibold text-base">Category Name</span>
                    </label>
                    <input type="text" placeholder="e.g., Fitness" 
                           class="input input-bordered input-lg w-full text-base {% if form.name.errors %}input-error{% endif %}" 
                           name="name" value="{{ form.name.value|default:'' }}" required>
                    {% if form.name.errors %}
                    <label class="label">
                        <span class="label-text-alt text-error">{{ form.name.errors.0 }}</span>
                    </label>
                    {% endif %}
                </div>

                <div class="form-control w-full">
                    <label class="label">
                        <span class="label-text font-semibold text-base">Description</span>
                        <span class="label-text-alt opacity-60">Optional</span>
                    </label>
                    <textarea class="textarea textarea-bordered h-24 text-base" 
                              placeholder="What does this track?"
                              name="description">{{ form.description.value|default:'' }}</textarea>
                </div>

                {% if form.color %}
                <div class="form-control w-full">
                    <label class="label">
                        <span class="label-text font-semibold text-base">Color Label</span>
                    </label>
                    <div class="flex items-center gap-3">
                        <input type="color" class="input p-1 w-16 h-12 flex-none" 
                               name="color" value="{{ form.color.value|default:'#06b6d4' }}">
                        <div class="text-sm opacity-60">Pick a color for charts</div>
                    </div>
                </div>
                {% endif %}

                <div class="flex flex-col-reverse sm:flex-row gap-3 mt-4">
                    <a href="{% url 'category_list' %}" class="btn btn-outline btn-lg sm:flex-1 h-12 min-h-[3rem]">Cancel</a>
                    <button type="submit" class="btn btn-primary btn-lg sm:flex-1 h-12 min-h-[3rem]">
                        {% if form.instance.pk %}Save Changes{% else %}Create{% endif %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
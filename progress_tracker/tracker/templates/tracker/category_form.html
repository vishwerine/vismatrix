{% extends 'tracker/base.html' %}

{% block title %}{{ title }} - Progress Tracker{% endblock %}

{% block content %}
<div class="bg-white dark:bg-slate-900 shadow-sm border border-slate-100 dark:border-slate-800 rounded-xl p-6 max-w-md mx-auto">
  <h1 class="text-2xl font-semibold text-slate-900 dark:text-slate-50 mb-6">{{ title }}</h1>

  <form method="post" class="space-y-6">
    {% csrf_token %}
    <!-- Category Name -->
    <div>
      <label for="id_name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Category Name</label>
      {{ form.name|add_class:"input input-bordered w-full" }}
      {% if form.name.errors %}
      <ul class="mt-1 text-rose-500 text-sm list-disc list-inside">
        {% for error in form.name.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <!-- Color Picker -->
    <div>
      <label for="id_color" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Color</label>
      {{ form.color|add_class:"input input-bordered w-full h-10" }}
      {% if form.color.errors %}
      <ul class="mt-1 text-rose-500 text-sm list-disc list-inside">
        {% for error in form.color.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <!-- Preview -->
    <div class="mt-4 p-4 bg-gray-100 dark:bg-slate-800 rounded-md">
      <p class="mb-2 font-semibold text-slate-700 dark:text-slate-300">Preview:</p>
      <div id="preview" class="inline-block rounded-md px-4 py-2 font-bold text-white">
        Category Preview
      </div>
    </div>

    <!-- Buttons -->
    <div class="flex gap-4">
      <button type="submit"
              class="inline-block rounded-lg bg-indigo-600 px-6 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">
        Save Category
      </button>
      <a href="{% url 'category_list' %}"
         class="inline-block rounded-lg bg-gray-400 px-6 py-2 text-sm font-semibold text-white hover:bg-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-500">
        Cancel
      </a>
    </div>
  </form>
</div>

<div class="max-w-md mt-8 mx-auto bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md shadow-sm">
  <h3 class="font-semibold mb-2 text-yellow-700">ðŸ’¡ Tips for Categories</h3>
  <ul class="list-disc list-inside text-yellow-800 space-y-1 text-sm leading-relaxed">
    <li>Choose descriptive names (e.g., "Deep Learning Study", "Morning Exercise")</li>
    <li>Use distinct colors to easily identify different activity types</li>
    <li>Keep the number of categories manageable (5-10 is ideal)</li>
    <li>You can always edit or reorganize categories later</li>
  </ul>
</div>

<script>
  // Live preview of color selection
  const colorInput = document.getElementById('id_color');
  const preview = document.getElementById('preview');
  const nameInput = document.getElementById('id_name');

  function updatePreview() {
    const color = colorInput.value || '#3498db';
    const name = nameInput.value || 'Category Preview';
    preview.style.background = color;
    preview.textContent = name;
  }

  colorInput.addEventListener('input', updatePreview);
  nameInput.addEventListener('input', updatePreview);

  // Initialize preview
  updatePreview();
</script>

{% endblock %}

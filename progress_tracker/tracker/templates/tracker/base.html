{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="VisMatrix.Space - Progress Tracker & Community">
  <title>{% block title %}VisMatrix.Space{% endblock %}</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- DaisyUI -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet">
  
  <style>
    :root {
      --scrollbar-width: 8px;
    }
    
    @media (max-width: 640px) {
      :root {
        --scrollbar-width: 6px;
      }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: var(--scrollbar-width);
    }
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
  </style>
</head>
<body class="bg-slate-50">
  <!-- Mobile Top Header Navigation -->
  <nav class="navbar bg-white shadow-md sticky top-0 z-50 px-2 sm:px-4">
    <div class="flex-1">
      <a href="{% url 'dashboard' %}" class="btn btn-ghost normal-case text-lg md:text-2xl font-black">
        <i class="bi bi-graph-up-arrow text-primary"></i>
        <span class="hidden sm:inline">VisMatrix</span>
      </a>
    </div>
    
    <!-- Desktop Navigation -->
    <div class="hidden md:flex flex-none gap-2">
      <a href="{% url 'task_list' %}" class="btn btn-outline btn-sm">
        <i class="bi bi-list-check"></i>
        Tasks
      </a>
      <a href="{% url 'log_list' %}" class="btn btn-outline btn-sm">
        <i class="bi bi-journal-text"></i>
        Logs
      </a>
      <a href="{% url 'friends_list' %}" class="btn btn-outline btn-sm">
        <i class="bi bi-people"></i>
        Friends
      </a>
      
      <!-- Desktop User Menu -->
      <div class="dropdown dropdown-end">
        <button class="btn btn-circle btn-ghost" title="User menu">
          <i class="bi bi-person-circle text-xl"></i>
        </button>
        <ul class="dropdown-content menu bg-base-100 rounded-lg z-50 shadow-xl border border-slate-200 w-52">
          <li><span class="text-sm opacity-75">{{ user.username }}</span></li>
          <li><a href="{% url 'account_email' %}"><i class="bi bi-gear"></i>Settings</a></li>
          <li><a href="{% url 'account_logout' %}"><i class="bi bi-box-arrow-right"></i>Logout</a></li>
        </ul>
      </div>
    </div>

    <!-- Mobile User Menu -->
    <div class="md:hidden dropdown dropdown-end">
      <button class="btn btn-circle btn-ghost" title="Menu">
        <i class="bi bi-three-dots-vertical text-lg"></i>
      </button>
      <ul class="dropdown-content menu bg-base-100 rounded-lg z-50 shadow-xl border border-slate-200 w-48">
        <li><span class="text-sm opacity-75 px-4 py-2">{{ user.username }}</span></li>
        <li><a href="{% url 'account_email' %}"><i class="bi bi-gear"></i>Settings</a></li>
        <li><a href="{% url 'account_logout' %}"><i class="bi bi-box-arrow-right"></i>Logout</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-emerald-50">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer (Desktop Only) -->
  <footer class="hidden md:block footer bg-base-200 text-base-content p-8 mt-12">
    <div>
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
      </svg>
      <p>VisMatrix.Space Â© 2025. Built with <i class="bi bi-heart-fill text-error"></i> for productivity.</p>
    </div>
  </footer>

  <!-- Toast Notifications Container -->
  <div id="toast-container" class="fixed bottom-20 md:bottom-4 right-4 space-y-2 z-50"></div>

  <script>
    // Toast notification helper
    function showToast(message, type = 'info') {
      const container = document.getElementById('toast-container');
      const alertClass = {
        'success': 'alert-success',
        'error': 'alert-error',
        'warning': 'alert-warning',
        'info': 'alert-info'
      }[type] || 'alert-info';
      
      const div = document.createElement('div');
      div.className = `alert ${alertClass} shadow-lg max-w-xs text-sm`;
      div.innerHTML = `<span>${message}</span>`;
      container.appendChild(div);
      
      setTimeout(() => div.remove(), 3000);
    }
  </script>
</body>
</html>
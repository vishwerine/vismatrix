{% extends 'tracker/base.html' %}
{% load widget_tweaks %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="text-center mb-16">
    <div class="w-24 h-24 mx-auto mb-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-3xl flex items-center justify-center text-white shadow-2xl">
      <i class="bi bi-journal-plus text-4xl"></i>
    </div>
    <h1 class="text-4xl lg:text-5xl font-black text-slate-900 mb-4">{{ title }}</h1>
    <p class="text-xl text-slate-600 max-w-md mx-auto">Record your productivity for today</p>
  </div>

  <div class="bg-white shadow-2xl border border-slate-200 rounded-3xl overflow-hidden">
    <div class="p-8 lg:p-12">
      {% if messages %}
      <div class="mb-8">
        {% for message in messages %}
        <div class="p-4 rounded-2xl {% if message.tags == 'success' %}bg-emerald-50 border-l-4 border-emerald-500{% else %}bg-red-50 border-l-4 border-red-500{% endif %}">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="post" class="space-y-8">
        {% csrf_token %}
        
        <!-- Activity -->
        <div>
          <label for="{{ form.activity.id_for_label }}" class="block text-lg font-bold text-slate-900 mb-3">
            Activity
          </label>
          {% render_field form.activity class="w-full px-5 py-4 border-2 border-slate-200 rounded-2xl focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100/50 resize-vertical min-h-[120px]" %}
          {% if form.activity.errors %}
          <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
            <i class="bi bi-exclamation-circle-fill"></i>{{ form.activity.errors|first }}
          </p>
          {% endif %}
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <!-- Date -->
          <div>
            <label for="{{ form.date.id_for_label }}" class="block text-lg font-semibold text-slate-900 mb-3">
              Date
            </label>
            {% render_field form.date class="w-full px-5 py-4 border-2 border-slate-200 rounded-2xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100/50" %}
          </div>

          <!-- Duration -->
          <div>
            <label for="{{ form.duration.id_for_label }}" class="block text-lg font-semibold text-slate-900 mb-3">
              Duration (minutes)
            </label>
            <div class="relative">
              {% render_field form.duration class="w-full pr-20 py-4 border-2 border-slate-200 rounded-2xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100/50" min="1" max="1440" %}
              <span class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 font-mono text-lg">min</span>
            </div>
          </div>
        </div>

        <!-- Category & Description -->
        <div class="grid lg:grid-cols-2 gap-6">
          <!-- Category -->
          <div>
            <label for="{{ form.category.id_for_label }}" class="block text-lg font-semibold text-slate-900 mb-3">
              Category
            </label>
            {% render_field form.category class="w-full px-5 py-4 border-2 border-slate-200 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-100/50" %}
          </div>

          <!-- Description -->
          <div>
            <label for="{{ form.description.id_for_label }}" class="block text-lg font-semibold text-slate-900 mb-3">
              Notes (optional)
            </label>
            {% render_field form.description class="w-full px-5 py-4 border-2 border-slate-200 rounded-2xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100/50 resize-vertical" rows="2" %}
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 pt-8 border-t border-slate-200">
          <button type="submit" 
                  class="flex-1 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-700 hover:to-teal-800 text-white font-bold py-4 px-8 rounded-2xl shadow-xl hover:shadow-2xl focus:ring-4 focus:ring-emerald-500/50 transition-all text-lg">
            <i class="bi bi-check-circle-fill inline-block mr-2"></i>
            Save Activity Log
          </button>
          <a href="{% url 'dashboard' %}" 
             class="flex-1 bg-white border-2 border-slate-300 hover:border-slate-400 text-slate-900 hover:text-slate-800 font-bold py-4 px-8 rounded-2xl shadow-lg hover:shadow-xl focus:ring-4 focus:ring-slate-400/50 transition-all text-lg flex items-center justify-center">
            <i class="bi bi-arrow-left inline-block mr-2"></i>
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

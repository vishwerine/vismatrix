{% extends 'tracker/base.html' %}

{% block title %}{{ friend.username }}'s Profile - Progress Tracker{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-6 py-12">
  <!-- Hero Header -->
  <div class="text-center mb-20">
    <div class="inline-flex items-center justify-center w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full shadow-2xl mb-8 border-8 border-white/50">
      <i class="bi bi-person-lines-fill text-5xl text-white drop-shadow-lg"></i>
    </div>
    <h1 class="text-6xl font-black text-slate-900 mb-4 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-700 bg-clip-text text-transparent">
      {{ friend.username }}'s Progress
    </h1>
    <p class="text-2xl text-slate-600 max-w-2xl mx-auto leading-relaxed">
      View detailed progress tracking and activity history
    </p>
  </div>

  <div class="grid lg:grid-cols-2 gap-12 mb-20">
    <!-- Completed Tasks Section -->
    <section class="bg-white shadow-2xl border border-slate-200 rounded-3xl p-12 hover:shadow-3xl transition-all duration-300 group">
      <div class="flex items-center gap-6 mb-10">
        <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-3xl flex items-center justify-center text-white shadow-2xl group-hover:scale-110 transition-transform duration-300">
          <i class="bi bi-check-circle-fill text-3xl"></i>
        </div>
        <div>
          <h2 class="text-4xl font-black text-slate-900 mb-2">Completed Tasks</h2>
          <div class="h-1 w-24 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full shadow-lg"></div>
        </div>
      </div>

      {% if tasks %}
      <div class="space-y-4 max-h-96 overflow-y-auto pr-4 -mr-4 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-slate-100">
        {% for task in tasks %}
        <div class="task-item group/task bg-gradient-to-r from-slate-50 to-white border border-slate-200 hover:border-green-300 rounded-2xl p-8 hover:shadow-xl hover:-translate-y-2 transition-all duration-300 hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50">
          <div class="flex items-start justify-between gap-6">
            <div class="flex-1 min-w-0">
              <h4 class="text-2xl font-bold text-slate-900 group-hover/task:text-green-900 transition-colors mb-3 line-clamp-2">{{ task.title }}</h4>
              <div class="inline-flex items-center gap-3 px-5 py-2 bg-green-100 text-green-800 rounded-2xl font-semibold shadow-sm border border-green-200">
                <i class="bi bi-check-lg text-lg"></i>
                <span>Completed</span>
              </div>
            </div>
            <div class="text-right flex-shrink-0">
              <div class="text-3xl font-black text-green-600 mb-1">{{ task.completed_at|date:"MMM d" }}</div>
              <div class="text-sm text-slate-500 font-medium">{{ task.completed_at|date:"Y" }}</div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="mt-8 pt-8 border-t-2 border-slate-200 text-center">
        <p class="text-xl font-semibold text-slate-600">{{ tasks|length }} task{{ tasks|length|pluralize }} completed</p>
      </div>
      {% else %}
      <div class="text-center py-24">
        <div class="w-32 h-32 mx-auto mb-8 bg-green-100/50 rounded-3xl flex items-center justify-center border-2 border-dashed border-green-300">
          <i class="bi bi-check-circle text-5xl text-green-400"></i>
        </div>
        <h3 class="text-3xl font-black text-slate-700 mb-4">No completed tasks yet</h3>
        <p class="text-xl text-slate-600 max-w-md mx-auto">This user hasn't completed any tasks recently</p>
      </div>
      {% endif %}
    </section>

    <!-- Daily Logs Section -->
    <section class="bg-white shadow-2xl border border-slate-200 rounded-3xl p-12 hover:shadow-3xl transition-all duration-300 group">
      <div class="flex items-center gap-6 mb-10">
        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-3xl flex items-center justify-center text-white shadow-2xl group-hover:scale-110 transition-transform duration-300">
          <i class="bi bi-journal-text text-3xl"></i>
        </div>
        <div>
          <h2 class="text-4xl font-black text-slate-900 mb-2">Daily Logs</h2>
          <div class="h-1 w-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full shadow-lg"></div>
        </div>
      </div>

      {% if logs %}
      <div class="space-y-4 max-h-96 overflow-y-auto pr-4 -mr-4 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-slate-100">
        {% for log in logs %}
        <div class="log-item group/log bg-gradient-to-r from-slate-50 to-white border border-slate-200 hover:border-blue-300 rounded-2xl p-8 hover:shadow-xl hover:-translate-y-2 transition-all duration-300 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50">
          <div class="flex items-start justify-between gap-6">
            <div class="flex-1 min-w-0">
              <h4 class="text-2xl font-bold text-slate-900 group-hover/log:text-blue-900 transition-colors mb-3 line-clamp-2">{{ log.activity }}</h4>
              <div class="inline-flex items-center gap-3 px-5 py-2 bg-blue-100 text-blue-800 rounded-2xl font-semibold shadow-sm border border-blue-200">
                <i class="bi bi-clock-fill text-lg"></i>
                <span>{{ log.duration }} min</span>
              </div>
            </div>
            <div class="text-right flex-shrink-0">
              <div class="text-3xl font-black text-blue-600 mb-1">{{ log.date|date:"MMM d" }}</div>
              <div class="text-sm text-slate-500 font-medium">{{ log.date|date:"Y" }}</div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="mt-8 pt-8 border-t-2 border-slate-200 text-center">
        <p class="text-xl font-semibold text-slate-600">{{ logs|length }} log{{ logs|length|pluralize }} recorded</p>
      </div>
      {% else %}
      <div class="text-center py-24">
        <div class="w-32 h-32 mx-auto mb-8 bg-blue-100/50 rounded-3xl flex items-center justify-center border-2 border-dashed border-blue-300">
          <i class="bi bi-journal-plus text-5xl text-blue-400"></i>
        </div>
        <h3 class="text-3xl font-black text-slate-700 mb-4">No daily logs yet</h3>
        <p class="text-xl text-slate-600 max-w-md mx-auto">This user hasn't logged any activities recently</p>
      </div>
      {% endif %}
    </section>
  </div>

  <!-- Action Button -->
  <div class="text-center">
    <a href="{% url 'friends_list' %}"
       class="inline-flex items-center gap-4 bg-gradient-to-r from-slate-100 to-slate-200 text-slate-900 px-12 py-6 rounded-3xl text-2xl font-black border-4 border-slate-300 hover:border-slate-400 hover:shadow-2xl hover:from-slate-200 hover:to-slate-300 focus:outline-none focus:ring-4 focus:ring-slate-500/50 focus:ring-offset-2 focus:ring-offset-white transform hover:-translate-y-2 transition-all duration-300 shadow-xl">
      <i class="bi bi-arrow-left text-3xl"></i>
      <span>Back to Friends List</span>
    </a>
  </div>
</div>

<style>
  /* Custom scrollbar for modern look */
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }
  .scrollbar-thin::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* Line clamp for long titles */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
{% endblock %}
